<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fdk-aac: original/libSBRdec/src/lpp_tran.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fdk-aac
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ed137715e08969a186ec660e8ae6e2fb.html">original</a></li><li class="navelem"><a class="el" href="dir_222de58a05c98cc4a78309a37525cd28.html">libSBRdec</a></li><li class="navelem"><a class="el" href="dir_c997d48ad60fbe63e2ba342b9c79db98.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lpp_tran.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Low Power Profile Transposer This module provides the transposer. The main entry point is <a class="el" href="lpp__tran_8cpp.html#a524aa88f1bd2cedb437ca6cde8a65cdb" title="Perform transposition by patching of subband samples. This function serves as the main entry point in...">lppTransposer()</a>. The function generates high frequency content by copying data from the low band (provided by core codec) into the high band. This process is also referred to as "patching". The function also implements spectral whitening by means of inverse filtering based on LPC coefficients.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="lpp__tran_8h_source.html">lpp_tran.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sbr__ram_8h_source.html">sbr_ram.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sbr__rom_8h_source.html">sbr_rom.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="generic_stds_8h_source.html">genericStds.h</a>&quot;</code><br />
<code>#include &quot;autocorr2nd.h&quot;</code><br />
<code>#include &quot;HFgen_preFlat.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad65b887b15d3fb05bd5f978cae68d133"><td class="memItemLeft" align="right" valign="top"><a id="ad65b887b15d3fb05bd5f978cae68d133"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LPC_SCALE_FACTOR</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ad65b887b15d3fb05bd5f978cae68d133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c5d4d2f8f74f9b523b8218d46572aee"><td class="memItemLeft" align="right" valign="top"><a id="a5c5d4d2f8f74f9b523b8218d46572aee"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ACDET_EXP</b>&#160;&#160;&#160;  (2 * (DFRACT_BITS + sbrScaleFactor-&gt;lb_scale + 10 - ac.det_scale))</td></tr>
<tr class="separator:a5c5d4d2f8f74f9b523b8218d46572aee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a84d38e9c29a2abe1cb5d3d9eb5ff63"><td class="memItemLeft" align="right" valign="top"><a id="a9a84d38e9c29a2abe1cb5d3d9eb5ff63"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AC_EXP</b>&#160;&#160;&#160;(-sbrScaleFactor-&gt;lb_scale + LPC_SCALE_FACTOR)</td></tr>
<tr class="separator:a9a84d38e9c29a2abe1cb5d3d9eb5ff63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d91620f1de5ca1b27f81a9fdcb8e9e1"><td class="memItemLeft" align="right" valign="top"><a id="a3d91620f1de5ca1b27f81a9fdcb8e9e1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ALPHA_EXP</b>&#160;&#160;&#160;(-sbrScaleFactor-&gt;lb_scale + LPC_SCALE_FACTOR + 1)</td></tr>
<tr class="separator:a3d91620f1de5ca1b27f81a9fdcb8e9e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6044407cfd33c41295d1b0028f40d5ec"><td class="memItemLeft" align="right" valign="top"><a id="a6044407cfd33c41295d1b0028f40d5ec"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>QMFOUT_EXP</b>&#160;&#160;&#160;((SAMPLE_BITS - 15) - sbrScaleFactor-&gt;lb_scale)</td></tr>
<tr class="separator:a6044407cfd33c41295d1b0028f40d5ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a524aa88f1bd2cedb437ca6cde8a65cdb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lpp__tran_8cpp.html#a524aa88f1bd2cedb437ca6cde8a65cdb">lppTransposer</a> (<a class="el" href="struct_s_b_r___l_p_p___t_r_a_n_s.html">HANDLE_SBR_LPP_TRANS</a> hLppTrans, <a class="el" href="struct_q_m_f___s_c_a_l_e___f_a_c_t_o_r.html">QMF_SCALE_FACTOR</a> *sbrScaleFactor, FIXP_DBL **qmfBufferReal, FIXP_DBL *degreeAlias, FIXP_DBL **qmfBufferImag, const int useLP, const int fPreWhitening, const int v_k_master0, const int timeStep, const int firstSlotOffs, const int lastSlotOffs, const int nInvfBands, INVF_MODE *sbr_invf_mode, INVF_MODE *sbr_invf_mode_prev)</td></tr>
<tr class="memdesc:a524aa88f1bd2cedb437ca6cde8a65cdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform transposition by patching of subband samples. This function serves as the main entry point into the module. The function determines the areas for the patching process (these are the source range as well as the target range) and implements spectral whitening by means of inverse filtering. The function autoCorrelation2nd() is an auxiliary function for calculating the LPC coefficients for the filtering. The actual calculation of the LPC coefficients and the implementation of the filtering are done as part of <a class="el" href="lpp__tran_8cpp.html#a524aa88f1bd2cedb437ca6cde8a65cdb" title="Perform transposition by patching of subband samples. This function serves as the main entry point in...">lppTransposer()</a>.  <a href="lpp__tran_8cpp.html#a524aa88f1bd2cedb437ca6cde8a65cdb">More...</a><br /></td></tr>
<tr class="separator:a524aa88f1bd2cedb437ca6cde8a65cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaefb4bb18220fd6159e63fd01f14fc77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lpp__tran_8cpp.html#aaefb4bb18220fd6159e63fd01f14fc77">lppTransposerHBE</a> (<a class="el" href="struct_s_b_r___l_p_p___t_r_a_n_s.html">HANDLE_SBR_LPP_TRANS</a> hLppTrans, <a class="el" href="structhbe_transposer.html">HANDLE_HBE_TRANSPOSER</a> hQmfTransposer, <a class="el" href="struct_q_m_f___s_c_a_l_e___f_a_c_t_o_r.html">QMF_SCALE_FACTOR</a> *sbrScaleFactor, FIXP_DBL **qmfBufferReal, FIXP_DBL **qmfBufferImag, const int timeStep, const int firstSlotOffs, const int lastSlotOffs, const int nInvfBands, INVF_MODE *sbr_invf_mode, INVF_MODE *sbr_invf_mode_prev)</td></tr>
<tr class="separator:aaefb4bb18220fd6159e63fd01f14fc77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7c3750a907ae5321f1d451028e83874"><td class="memItemLeft" align="right" valign="top">SBR_ERROR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lpp__tran_8cpp.html#aa7c3750a907ae5321f1d451028e83874">createLppTransposer</a> (<a class="el" href="struct_s_b_r___l_p_p___t_r_a_n_s.html">HANDLE_SBR_LPP_TRANS</a> hs, <a class="el" href="struct_t_r_a_n_s_p_o_s_e_r___s_e_t_t_i_n_g_s.html">TRANSPOSER_SETTINGS</a> *pSettings, const int highBandStartSb, <a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> *v_k_master, const int numMaster, const int usb, const int timeSlots, const int nCols, <a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> *noiseBandTable, const int noNoiseBands, <a class="el" href="machine__type_8h.html#afff0ab3629a68bc1bb3b2a2f4296173f">UINT</a> fs, const int chan, const int overlap)</td></tr>
<tr class="memdesc:aa7c3750a907ae5321f1d451028e83874"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize one low power transposer instance.  <a href="lpp__tran_8cpp.html#aa7c3750a907ae5321f1d451028e83874">More...</a><br /></td></tr>
<tr class="separator:aa7c3750a907ae5321f1d451028e83874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13e3d09ebd3d5afe2118961ee9483692"><td class="memItemLeft" align="right" valign="top">SBR_ERROR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lpp__tran_8cpp.html#a13e3d09ebd3d5afe2118961ee9483692">resetLppTransposer</a> (<a class="el" href="struct_s_b_r___l_p_p___t_r_a_n_s.html">HANDLE_SBR_LPP_TRANS</a> hLppTrans, <a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> highBandStartSb, <a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> *v_k_master, <a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> numMaster, <a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> *noiseBandTable, <a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> noNoiseBands, <a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> usb, <a class="el" href="machine__type_8h.html#afff0ab3629a68bc1bb3b2a2f4296173f">UINT</a> fs)</td></tr>
<tr class="memdesc:a13e3d09ebd3d5afe2118961ee9483692"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset memory for one lpp transposer instance.  <a href="lpp__tran_8cpp.html#a13e3d09ebd3d5afe2118961ee9483692">More...</a><br /></td></tr>
<tr class="separator:a13e3d09ebd3d5afe2118961ee9483692"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Low Power Profile Transposer This module provides the transposer. The main entry point is <a class="el" href="lpp__tran_8cpp.html#a524aa88f1bd2cedb437ca6cde8a65cdb" title="Perform transposition by patching of subband samples. This function serves as the main entry point in...">lppTransposer()</a>. The function generates high frequency content by copying data from the low band (provided by core codec) into the high band. This process is also referred to as "patching". The function also implements spectral whitening by means of inverse filtering based on LPC coefficients. </p>
<p>Together with the QMF filterbank the transposer can be tested using a supplied test program. See main_audio.cpp for details. This module does use fractional arithmetic and the accuracy of the computations has an impact on the overall sound quality. The module also needs to take into account the different scaling of spectral data.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="lpp__tran_8cpp.html#a524aa88f1bd2cedb437ca6cde8a65cdb" title="Perform transposition by patching of subband samples. This function serves as the main entry point in...">lppTransposer()</a>, main_audio.cpp, sbr_scale.h, <a class="el" href="documentation_overview.html">Overview of important information resources and</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa7c3750a907ae5321f1d451028e83874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7c3750a907ae5321f1d451028e83874">&#9670;&nbsp;</a></span>createLppTransposer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SBR_ERROR createLppTransposer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_b_r___l_p_p___t_r_a_n_s.html">HANDLE_SBR_LPP_TRANS</a>&#160;</td>
          <td class="paramname"><em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_r_a_n_s_p_o_s_e_r___s_e_t_t_i_n_g_s.html">TRANSPOSER_SETTINGS</a> *&#160;</td>
          <td class="paramname"><em>pSettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>highBandStartSb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> *&#160;</td>
          <td class="paramname"><em>v_k_master</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>numMaster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>usb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>timeSlots</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nCols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> *&#160;</td>
          <td class="paramname"><em>noiseBandTable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>noNoiseBands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine__type_8h.html#afff0ab3629a68bc1bb3b2a2f4296173f">UINT</a>&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>overlap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize one low power transposer instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hs</td><td>Handle of low power transposer </td></tr>
    <tr><td class="paramname">pSettings</td><td>Pointer to settings </td></tr>
    <tr><td class="paramname">highBandStartSb</td><td>? </td></tr>
    <tr><td class="paramname">v_k_master</td><td>Master table </td></tr>
    <tr><td class="paramname">numMaster</td><td>Valid entries in master table </td></tr>
    <tr><td class="paramname">usb</td><td>Highband area stop subband </td></tr>
    <tr><td class="paramname">timeSlots</td><td>Number of time slots </td></tr>
    <tr><td class="paramname">nCols</td><td>Number of colums (codec qmf bank) </td></tr>
    <tr><td class="paramname">noiseBandTable</td><td>Mapping of SBR noise bands to QMF bands </td></tr>
    <tr><td class="paramname">noNoiseBands</td><td>Number of noise bands </td></tr>
    <tr><td class="paramname">fs</td><td>Sample Frequency </td></tr>
    <tr><td class="paramname">chan</td><td>Channel number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a524aa88f1bd2cedb437ca6cde8a65cdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a524aa88f1bd2cedb437ca6cde8a65cdb">&#9670;&nbsp;</a></span>lppTransposer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lppTransposer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_b_r___l_p_p___t_r_a_n_s.html">HANDLE_SBR_LPP_TRANS</a>&#160;</td>
          <td class="paramname"><em>hLppTrans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_q_m_f___s_c_a_l_e___f_a_c_t_o_r.html">QMF_SCALE_FACTOR</a> *&#160;</td>
          <td class="paramname"><em>sbrScaleFactor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FIXP_DBL **&#160;</td>
          <td class="paramname"><em>qmfBufferReal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FIXP_DBL *&#160;</td>
          <td class="paramname"><em>degreeAlias</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FIXP_DBL **&#160;</td>
          <td class="paramname"><em>qmfBufferImag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>useLP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>fPreWhitening</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>v_k_master0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>timeStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>firstSlotOffs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>lastSlotOffs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nInvfBands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INVF_MODE *&#160;</td>
          <td class="paramname"><em>sbr_invf_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INVF_MODE *&#160;</td>
          <td class="paramname"><em>sbr_invf_mode_prev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform transposition by patching of subband samples. This function serves as the main entry point into the module. The function determines the areas for the patching process (these are the source range as well as the target range) and implements spectral whitening by means of inverse filtering. The function autoCorrelation2nd() is an auxiliary function for calculating the LPC coefficients for the filtering. The actual calculation of the LPC coefficients and the implementation of the filtering are done as part of <a class="el" href="lpp__tran_8cpp.html#a524aa88f1bd2cedb437ca6cde8a65cdb" title="Perform transposition by patching of subband samples. This function serves as the main entry point in...">lppTransposer()</a>. </p>
<p>Note that the filtering is done on all available QMF subsamples, whereas the patching is only done on those QMF subsamples that will be used in the next QMF synthesis. The filtering is also implemented before the patching includes further dependencies on parameters from the SBR data. </p>
<p>&lt; pole moving factors</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hLppTrans</td><td>Handle of lpp transposer </td></tr>
    <tr><td class="paramname">sbrScaleFactor</td><td>Scaling factors </td></tr>
    <tr><td class="paramname">qmfBufferReal</td><td>Pointer to pointer to real part of subband samples (source) </td></tr>
    <tr><td class="paramname">degreeAlias</td><td>Vector for results of aliasing estimation </td></tr>
    <tr><td class="paramname">qmfBufferImag</td><td>Pointer to pointer to imaginary part of subband samples (source) </td></tr>
    <tr><td class="paramname">timeStep</td><td>Time step of envelope </td></tr>
    <tr><td class="paramname">firstSlotOffs</td><td>Start position in time </td></tr>
    <tr><td class="paramname">lastSlotOffs</td><td>Number of overlap-slots into next frame </td></tr>
    <tr><td class="paramname">nInvfBands</td><td>Number of bands for inverse filtering </td></tr>
    <tr><td class="paramname">sbr_invf_mode</td><td>Current inverse filtering modes </td></tr>
    <tr><td class="paramname">sbr_invf_mode_prev</td><td>Previous inverse filtering modes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaefb4bb18220fd6159e63fd01f14fc77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaefb4bb18220fd6159e63fd01f14fc77">&#9670;&nbsp;</a></span>lppTransposerHBE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lppTransposerHBE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_b_r___l_p_p___t_r_a_n_s.html">HANDLE_SBR_LPP_TRANS</a>&#160;</td>
          <td class="paramname"><em>hLppTrans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhbe_transposer.html">HANDLE_HBE_TRANSPOSER</a>&#160;</td>
          <td class="paramname"><em>hQmfTransposer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_q_m_f___s_c_a_l_e___f_a_c_t_o_r.html">QMF_SCALE_FACTOR</a> *&#160;</td>
          <td class="paramname"><em>sbrScaleFactor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FIXP_DBL **&#160;</td>
          <td class="paramname"><em>qmfBufferReal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FIXP_DBL **&#160;</td>
          <td class="paramname"><em>qmfBufferImag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>timeStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>firstSlotOffs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>lastSlotOffs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nInvfBands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INVF_MODE *&#160;</td>
          <td class="paramname"><em>sbr_invf_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INVF_MODE *&#160;</td>
          <td class="paramname"><em>sbr_invf_mode_prev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&lt; pole moving factors</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hLppTrans</td><td>Handle of lpp transposer </td></tr>
    <tr><td class="paramname">sbrScaleFactor</td><td>Scaling factors </td></tr>
    <tr><td class="paramname">qmfBufferReal</td><td>Pointer to pointer to real part of subband samples (source) </td></tr>
    <tr><td class="paramname">qmfBufferImag</td><td>Pointer to pointer to imaginary part of subband samples (source) </td></tr>
    <tr><td class="paramname">timeStep</td><td>Time step of envelope </td></tr>
    <tr><td class="paramname">firstSlotOffs</td><td>Start position in time </td></tr>
    <tr><td class="paramname">lastSlotOffs</td><td>Number of overlap-slots into next frame </td></tr>
    <tr><td class="paramname">nInvfBands</td><td>Number of bands for inverse filtering </td></tr>
    <tr><td class="paramname">sbr_invf_mode</td><td>Current inverse filtering modes </td></tr>
    <tr><td class="paramname">sbr_invf_mode_prev</td><td>Previous inverse filtering modes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a13e3d09ebd3d5afe2118961ee9483692"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13e3d09ebd3d5afe2118961ee9483692">&#9670;&nbsp;</a></span>resetLppTransposer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SBR_ERROR resetLppTransposer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_b_r___l_p_p___t_r_a_n_s.html">HANDLE_SBR_LPP_TRANS</a>&#160;</td>
          <td class="paramname"><em>hLppTrans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a>&#160;</td>
          <td class="paramname"><em>highBandStartSb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> *&#160;</td>
          <td class="paramname"><em>v_k_master</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a>&#160;</td>
          <td class="paramname"><em>numMaster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a> *&#160;</td>
          <td class="paramname"><em>noiseBandTable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a>&#160;</td>
          <td class="paramname"><em>noNoiseBands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine__type_8h.html#aed5a2dbe32af3a91203f0f5e8697e873">UCHAR</a>&#160;</td>
          <td class="paramname"><em>usb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine__type_8h.html#afff0ab3629a68bc1bb3b2a2f4296173f">UINT</a>&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset memory for one lpp transposer instance. </p>
<dl class="section return"><dt>Returns</dt><dd>SBRDEC_OK on success, SBRDEC_UNSUPPORTED_CONFIG on error </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hLppTrans</td><td>Handle of lpp transposer </td></tr>
    <tr><td class="paramname">highBandStartSb</td><td>High band area: start subband </td></tr>
    <tr><td class="paramname">v_k_master</td><td>Master table </td></tr>
    <tr><td class="paramname">numMaster</td><td>Valid entries in master table </td></tr>
    <tr><td class="paramname">noiseBandTable</td><td>Mapping of SBR noise bands to QMF bands </td></tr>
    <tr><td class="paramname">noNoiseBands</td><td>Number of noise bands </td></tr>
    <tr><td class="paramname">usb</td><td>High band area: stop subband </td></tr>
    <tr><td class="paramname">fs</td><td>SBR output sampling frequency </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
